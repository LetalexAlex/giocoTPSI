<!DOCTYPE html>
<head>
    <title>Pong</title>
    <script src="https://pixijs.download/release/pixi.js"></script>
    <!--<script src="js/index.js"></script>-->
</head>
<body>
    <script type="module">
        const keyMap = {
            KeyW: 'up1',
            KeyS: 'down1',
            ArrowUp: 'up2',
            ArrowDown: 'down2'
        }

        const app = new PIXI.Application();
        await app.init({ width: 1360, height: 720 });

        document.body.appendChild(app.canvas);

        await PIXI.Assets.load('assets/arts/Computer.png');
        let p1 = PIXI.Sprite.from('assets/arts/Computer.png');
        app.stage.addChild(p1);

        await PIXI.Assets.load('assets/arts/Player.png');
        let p2 = PIXI.Sprite.from('assets/arts/Player.png');
        app.stage.addChild(p2);
        p2.x = 1343;

        let elapsed = 0.0;
        
        document.addEventListener('keydown', (event) => {
            if (keyMap[event.code]) {

                let key = keyMap[event.code];
                if (key.startsWith('up1')) {
                    p1.y -= 10;
                    console.log(p1.y);
                    if (p1.y < 0) {
                        p1.y = 0;
                    }
                }
                if(key.startsWith('down1')) {
                    p1.y += 10;
                    console.log(p1.y);
                    if (p1.y > 600) {
                        p1.y = 600;
                    }
                }
                if (key.startsWith('up2')) {
                    p2.y -= 10;
                    console.log(p2.y);
                    if (p2.y < 0) {
                        p2.y = 0;
                    }
                }
                if(key.startsWith('down2')) {
                    p2.y += 10;
                    console.log(p2.y);
                    if (p2.y > 600) {
                        p2.y = 600;
                    }
                }
            }
        });

        app.ticker.add((ticker) => {
            elapsed += ticker.deltaTime;
            //p1.y = 100.0 + Math.cos(elapsed/50.0) * 100.0;
            //p2.y = 100.0 + Math.cos(elapsed/50.0) * 100.0;
        })
    </script>
</body>
</html>